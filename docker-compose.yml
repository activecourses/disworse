services:
    pg:
        image: postgres:14.1-alpine
        container_name: postgres
        restart: always
        ports:
            - 5432:5432
        env_file:
            - ".env.backend"
        # environment:
        #     - POSTGRES_DB
        #     - POSTGRES_USER
        #     - POSTGRES_PASSWORD

    # db-test:
    #     image: postgres:14.1-alpine
    #     restart: always
    #     ports:
    #         - 5433:5432
    #     environment:
    #         POSTGRES_DB: disworse-test
    #         POSTGRES_USER: postgres
    #         POSTGRES_PASSWORD: postgres

    cache:
        image: redis
        container_name: cache
        restart: always
        ports:
            - 6379:6379

    project:
        image: node
        working_dir: /app
        ports:
            - 3333:3333
        volumes:
            - .:/app
        command: sh -c "scripts/entrypoint.sh"
        # command: cat "scripts/entrypoint.sh"
        depends_on:
            - cache
            - pg
